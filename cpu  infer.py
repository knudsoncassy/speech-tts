import os from pathlib import Path import torch from TTS.api import TTS MODELS_DIR = Path(__file__).resolve().parent.parent / "models" / "checkpoints" OUTPUT_DIR = Path(__file__).resolve().parent.parent / "output" OUTPUT_DIR.mkdir(exist_ok=True) # Load best checkpoint if exists def load_model(): ckpt = MODELS_DIR / "best_model.pth.tar" if ckpt.exists(): print("[+] Loading fine-tuned model...") return TTS(model_path=str(ckpt)) else: print("[!] No fine-tuned model found, using pretrained fallback.") return TTS("tts_models/en/ljspeech/tacotron2-DDC") tts = load_model() def speak(text: str, out_path: str = None): if out_path is None: out_path = OUTPUT_DIR / "output.wav" tts.tts_to_file(text=text, file_path=str(out_path)) print(f"[+] Audio saved to {out_path}") return str(out_path) if __name__ == "__main__": speak("Hello, this is your new TTS model speaking.")
